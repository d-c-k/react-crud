(this["webpackJsonpreact-crud"]=this["webpackJsonpreact-crud"]||[]).push([[0],{34:function(e,t,n){},41:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n(1),a=n.n(c),i=n(24),s=n.n(i),o=(n(34),n(10)),j=n(2),l=Object(c.createContext)(),b=n(12),u=n(11),d=n(6),h=n(3);function O(){var e=Object(d.a)(["\n\tfont-size: 0.9rem;\n\tcolor: white;\n\tbackground-color: black;\n\tborder: none;\n\tpadding: 0.3rem;\n\tmargin:0 1.2rem 0 0;\n\tmax-width: 5rem;\n\theight: 2.2rem;\n\tcursor: pointer;\n\n\t&:hover{\n\t\tbackground-color: orangered;\n\t}\n"]);return O=function(){return e},e}var m=h.a.button(O());function x(){var e=Object(d.a)(["\n\tdisplay: flex;\n\tflex-direction: column;\n\n\tinput{\n\t\twidth: 60%;\n\t\tmin-width: 30%;\n\t\tfloat: right;\n\t}\n"]);return x=function(){return e},e}var f=h.a.form(x());function p(){var e=Object(d.a)(["\n\tgrid-row: 2;\n\tgrid-column: 2;\n"]);return p=function(){return e},e}var g=h.a.div(p());function v(){var e=Object(c.useContext)(l),t=e.setUser,n=e.setCustomerData,a=Object(c.useState)({user:"",password:""}),i=Object(o.a)(a,2),s=i[0],d=i[1],h=Object(j.f)();function O(e){d(Object(u.a)(Object(u.a)({},s),{},Object(b.a)({},e.target.name,e.target.value)))}return Object(r.jsx)(g,{children:Object(r.jsxs)(f,{onSubmit:function(e){e.preventDefault();var r="/home",c={email:s.user,password:s.password};fetch("https://frebi.willandskill.eu/api-token-auth/",{method:"POST",body:JSON.stringify(c),headers:{"Content-Type":"application/json"}}).then((function(e){return!!e.ok&&e})).then((function(e){return e?e.json():r="error"})).then((function(e){localStorage.setItem("logInToken",e.token),h.push(r),function(){var e=localStorage.getItem("logInToken");fetch("https://frebi.willandskill.eu/api/v1/customers/",{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}}).then((function(e){return e.json()})).then((function(e){return n(e.results)}))}(),function(){var e=localStorage.getItem("logInToken");fetch("https://frebi.willandskill.eu/api/v1/me/",{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}}).then((function(e){return e.json()})).then((function(e){return t(e)}))}()})),t(s.user)},children:[Object(r.jsxs)("label",{children:["User:",Object(r.jsx)("input",{name:"user",value:s.user,onChange:O})]}),Object(r.jsx)("br",{}),Object(r.jsxs)("label",{children:["Password:",Object(r.jsx)("input",{name:"password",type:"password",value:s.password,onChange:O})]}),Object(r.jsx)("br",{}),Object(r.jsx)(m,{type:"submit",children:"Log in"})]})})}var N=n(5);function y(){var e=Object(j.f)(),t=Object(c.useContext)(l).user;return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)("p",{children:["User ID: ",t.id]}),Object(r.jsxs)("p",{children:[t.firstName," ",t.lastName]}),Object(r.jsx)("p",{children:t.email}),Object(r.jsx)("br",{}),Object(r.jsx)(m,{type:"button",onClick:function(){localStorage.removeItem("logInToken"),e.push("/")},children:"Log out"})]})}function k(e){var t=e.listData;return Object(r.jsx)(N.b,{to:"/customers/".concat(t.id),children:Object(r.jsx)("p",{children:t.name})})}function T(){var e=Object(d.a)(["\n    grid-column: 3;\n"]);return T=function(){return e},e}var C=Object(h.a)(g)(T());function S(){var e=Object(d.a)(["\n    grid-column: 5;\n"]);return S=function(){return e},e}var w=Object(h.a)(g)(S());function I(){var e=Object(c.useContext)(l).customerData;return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)(g,{children:[Object(r.jsx)("p",{children:"Home:"}),Object(r.jsx)("nav",{children:Object(r.jsx)(N.b,{to:"/addcustomers",children:Object(r.jsx)("p",{children:"Add new customer"})})})]}),Object(r.jsx)(C,{children:e?e.map((function(e){return Object(r.jsx)(k,{listData:e},e.id)})):Object(r.jsx)("p",{children:"No data"})}),Object(r.jsx)(w,{children:Object(r.jsx)(y,{})})]})}function E(){var e=Object(d.a)(["\n    color: orangered;\n    animation: 700ms "," infinite;\n"]);return E=function(){return e},e}var A=h.a.span(E(),Object(h.b)({from:{opacity:100},to:{opacity:0}}));function D(){var e=Object(j.f)();return Object(r.jsxs)(g,{children:[Object(r.jsx)("p",{children:Object(r.jsx)(A,{children:"ERROR"})}),Object(r.jsx)("br",{}),Object(r.jsx)(m,{onClick:function(){e.push("/")},children:"Back"})]})}function F(){var e=Object(d.a)(["\n    color:","\n"]);return F=function(){return e},e}var P=h.a.input(F(),(function(e){return!0===e.valid?"green":"red"}));function B(){var e=Object(c.useState)({}),t=Object(o.a)(e,2),n=t[0],a=t[1],i=Object(c.useState)(!1),s=Object(o.a)(i,2),d=s[0],h=s[1],O=Object(c.useContext)(l).setCustomerData,x=Object(j.f)();function p(e){a(Object(u.a)(Object(u.a)({},n),{},Object(b.a)({},e.target.name,e.target.value)))}function v(e,t,n){return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)("label",{children:[t,":",Object(r.jsx)("input",{type:n||"text",name:e,onChange:p})]}),Object(r.jsx)("br",{})]})}return Object(c.useEffect)((function(){n.vatNr&&function(){var e=RegExp(/[0-9]{10}/);12===n.vatNr.length&&"S"===n.vatNr.charAt(0)&&"E"===n.vatNr.charAt(1)&&!0===e.test(n.vatNr)?h(!0):h(!1)}()}),[n.vatNr]),Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(g,{children:Object(r.jsxs)("p",{children:[Object(r.jsx)(N.b,{to:"/home",children:"Home"}),"/Add new customer:"]})}),Object(r.jsx)(C,{children:Object(r.jsxs)(f,{onSubmit:function(e){if(e.preventDefault(),d){var t=localStorage.getItem("logInToken");fetch("https://frebi.willandskill.eu/api/v1/customers/",{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)}}).then((function(e){return e.json()})).then((function(e){x.push("/home"),function(){var e=localStorage.getItem("logInToken");fetch("https://frebi.willandskill.eu/api/v1/customers/",{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}}).then((function(e){return e.json()})).then((function(e){return O(e.results)}))}()}))}else alert("Invalid input, the correct format is SE(10 digits)")},children:[v("name","Name"),v("organisationNr","Org. Number"),Object(r.jsxs)("label",{children:["VAT Number:",Object(r.jsx)(P,{valid:d,type:"text",name:"vatNr",onChange:p,placeholder:"Format: SE(10 digits)"})]}),Object(r.jsx)("br",{}),v("reference","Reference"),v("paymentTerm","Payment Term","number"),v("website","Website","url"),v("email","Email","email"),v("phoneNumber","Phone Number","tel"),Object(r.jsx)(m,{type:"submit",children:"Add"})]})}),Object(r.jsx)(w,{children:Object(r.jsx)(y,{})})]})}function z(){return Object(r.jsx)("tr",{children:Object(r.jsx)("td",{children:Object(r.jsx)("br",{})})})}function R(){var e=Object(d.a)(["\n    width: 100%;\n    margin:0 0 1.2rem 0;\n    border-spacing: 0;\n"]);return R=function(){return e},e}var U=h.a.table(R());function J(e){var t=Object(c.useContext)(l),n=t.customerData,a=t.setCustomerData,i=Number(e.match.params.id),s=n.map((function(e){return e.id})).indexOf(i),o=Object(j.f)();return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(g,{children:Object(r.jsxs)("p",{children:[Object(r.jsx)(N.b,{to:"/home",children:"Home"}),"/",n[s].name,":"]})}),Object(r.jsxs)(C,{children:[Object(r.jsx)(U,{children:Object(r.jsxs)("tbody",{children:[Object(r.jsxs)("tr",{children:[Object(r.jsx)("td",{children:"Name:"}),Object(r.jsx)("td",{children:n[s].name})]}),Object(r.jsx)(z,{}),Object(r.jsxs)("tr",{children:[Object(r.jsx)("td",{children:"Org. Number:"}),Object(r.jsx)("td",{children:n[s].organisationNr})]}),Object(r.jsx)(z,{}),Object(r.jsxs)("tr",{children:[Object(r.jsx)("td",{children:"VAT Number:"}),Object(r.jsx)("td",{children:n[s].vatNr})]}),Object(r.jsx)(z,{}),Object(r.jsxs)("tr",{children:[Object(r.jsx)("td",{children:"Reference:"}),Object(r.jsx)("td",{children:n[s].reference})]}),Object(r.jsx)(z,{}),Object(r.jsxs)("tr",{children:[Object(r.jsx)("td",{children:"Payment Term:"}),Object(r.jsx)("td",{children:n[s].paymentTerm})]}),Object(r.jsx)(z,{}),Object(r.jsxs)("tr",{children:[Object(r.jsx)("td",{children:"Website:"}),Object(r.jsx)("td",{children:Object(r.jsx)("a",{href:n[s].website,target:"_blank",rel:"noreferrer",children:n[s].website})})]}),Object(r.jsx)(z,{}),Object(r.jsxs)("tr",{children:[Object(r.jsx)("td",{children:"Email:"}),Object(r.jsx)("td",{children:Object(r.jsx)("a",{href:"mailto:".concat(n[s].email),children:n[s].email})})]}),Object(r.jsx)(z,{}),Object(r.jsxs)("tr",{children:[Object(r.jsx)("td",{children:"Phone Number:"}),Object(r.jsx)("td",{children:n[s].phoneNumber})]})]})}),Object(r.jsx)(N.b,{to:"/customers/".concat(i,"/edit"),children:Object(r.jsx)(m,{type:"button",children:"Edit"})}),Object(r.jsx)(m,{type:"button",onClick:function(){var e="https://frebi.willandskill.eu/api/v1/customers/".concat(i,"/"),t=localStorage.getItem("logInToken");fetch(e,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)}}).then((function(){!function(){var e=localStorage.getItem("logInToken");fetch("https://frebi.willandskill.eu/api/v1/customers/",{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}}).then((function(e){return e.json()})).then((function(e){return a(e.results)}))}(),o.push("/home")}))},children:"Delete"}),Object(r.jsx)(N.b,{to:"/home",children:Object(r.jsx)(m,{type:"button",children:"Back"})})]}),Object(r.jsx)(w,{children:Object(r.jsx)(y,{})})]})}var L=n(28);function H(e){var t=Object(c.useState)(!1),n=Object(o.a)(t,2),a=n[0],i=n[1],s=Object(c.useContext)(l),d=s.customerData,h=s.setCustomerData,O=Number(e.match.params.id),x=d.map((function(e){return e.id})).indexOf(O),p=Object(j.f)();function v(e){var t=Object(L.a)(d),n=Object(u.a)(Object(u.a)({},t[x]),{},Object(b.a)({},e.target.name,e.target.value));t[x]=n,h(t)}function k(e,t,n){return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)("label",{children:[t,":",Object(r.jsx)("input",{type:n||"text",name:e,value:d[x][e]||"",onChange:v})]}),Object(r.jsx)("br",{})]})}return Object(c.useEffect)((function(){d[x].vatNr&&function(){var e=RegExp(/[0-9]{10}/);12===d[x].vatNr.length&&"S"===d[x].vatNr.charAt(0)&&"E"===d[x].vatNr.charAt(1)&&!0===e.test(d[x].vatNr)?i(!0):i(!1)}()}),[d[x].vatNr]),Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(g,{children:Object(r.jsxs)("p",{children:[Object(r.jsx)(N.b,{to:"/home",children:"Home"}),"/Edit ",d[x].name,":"]})}),Object(r.jsx)(C,{children:Object(r.jsxs)(f,{onSubmit:function(e){if(e.preventDefault(),a){var t="https://frebi.willandskill.eu/api/v1/customers/".concat(O,"/"),n=localStorage.getItem("logInToken");fetch(t,{method:"PUT",body:JSON.stringify(d[x]),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)}}).then((function(e){return e.json()})).then((function(e){p.push("/customers/".concat(O)),function(){var e=localStorage.getItem("logInToken");fetch("https://frebi.willandskill.eu/api/v1/customers/",{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}}).then((function(e){return e.json()})).then((function(e){return h(e.results)}))}()}))}else alert("Invalid input, the correct format is SE(10 digits)")},children:[k("name","Name"),k("organisationNr","Org. Number"),Object(r.jsxs)("label",{children:["VAT Number:",Object(r.jsx)(P,{valid:a,type:"text",name:"vatNr",value:d[x].vatNr,onChange:v,placeholder:"Format: SE(10 digits)"})]}),Object(r.jsx)("br",{}),k("reference","Reference"),k("paymentTerm","Payment Term","number"),k("website","Website","url"),k("email","Email","email"),k("phoneNumber","Phone Number","tel"),Object(r.jsx)(m,{type:"submit",children:"Update"})]})}),Object(r.jsx)(w,{children:Object(r.jsx)(y,{})})]})}function V(){var e=Object(d.a)(["\n\tdisplay: grid;\n\tgrid-template-columns: 5rem 1fr 1fr 1fr 1fr 5rem;\n\tgrid-template-rows: 5rem 1fr;\n\n\ta{\n\t\ttext-decoration: none;\n\n\t\t&:visited{\n\t\t\tcolor: black;\n\t\t}\n\n\t\t&:hover{\n\t\t\tcolor: orangered;\n\t\t}\t\t\n\t}\n"]);return V=function(){return e},e}var W=h.a.div(V());var M=function(){var e=Object(c.useState)({}),t=Object(o.a)(e,2),n=t[0],a=t[1],i=Object(c.useState)([]),s=Object(o.a)(i,2),b={user:n,setUser:a,customerData:s[0],setCustomerData:s[1]};return Object(r.jsx)(W,{children:Object(r.jsx)(l.Provider,{value:b,children:Object(r.jsxs)(j.c,{children:[Object(r.jsx)(j.a,{path:"/customers/:id/edit",component:H}),Object(r.jsx)(j.a,{path:"/customers/:id",component:J}),Object(r.jsx)(j.a,{path:"/addcustomers",children:Object(r.jsx)(B,{})}),Object(r.jsx)(j.a,{path:"/home",children:Object(r.jsx)(I,{})}),Object(r.jsx)(j.a,{path:"/error",children:Object(r.jsx)(D,{})}),Object(r.jsx)(j.a,{path:"/",children:Object(r.jsx)(v,{})})]})})})},_=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,42)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),r(e),c(e),a(e),i(e)}))};s.a.render(Object(r.jsx)(a.a.StrictMode,{children:Object(r.jsx)(N.a,{children:Object(r.jsx)(M,{})})}),document.getElementById("root")),_()}},[[41,1,2]]]);
//# sourceMappingURL=main.2ea2064b.chunk.js.map